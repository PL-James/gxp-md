---
interface TocItem {
  id: string;
  label: string;
  children?: TocItem[];
}

interface Props {
  items: TocItem[];
}

const { items } = Astro.props;
---

<nav class="sticky top-20 max-h-[calc(100vh-6rem)] overflow-y-auto text-sm" aria-label="Table of contents">
  <p class="font-semibold text-slate-900 mb-3">On this page</p>
  <ul class="space-y-1 border-l border-slate-200">
    {items.map(item => (
      <li>
        <a
          href={`#${item.id}`}
          class="block pl-4 py-1 text-slate-500 hover:text-gxp-700 border-l-2 border-transparent hover:border-gxp-500 transition-colors -ml-px"
        >
          {item.label}
        </a>
        {item.children && (
          <ul class="ml-4 space-y-0.5">
            {item.children.map(child => (
              <li>
                <a
                  href={`#${child.id}`}
                  class="block pl-4 py-0.5 text-xs text-slate-400 hover:text-gxp-600 transition-colors"
                >
                  {child.label}
                </a>
              </li>
            ))}
          </ul>
        )}
      </li>
    ))}
  </ul>
</nav>
